{"version":3,"sources":["webpack:///./src/assets/icons/bag-x.svg","webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?7a75"],"names":["module","exports","class","src","width","alt","carts","length","to","cart","i","key","id","product","imageUrl","title","roast","unit","$filters","currency","price","category","grindText","grindType","type","placeholder","aria-label","aria-describedby","qty","href","deleteCart","total","coupon","disabled","final_total","checkCoupon","data","methods","getCart","loader","this","$loading","show","$http","get","then","res","console","log","catch","err","message","finally","hide","calcQty","cartId","productId","index","act","updateQty","updateCart","cartData","product_id","put","$swal","fire","showDenyButton","confirmButtonText","denyButtonText","result","isConfirmed","delete","success","couponData","code","post","mounted","render"],"mappings":"qGAAAA,EAAOC,QAAU,IAA0B,0B,iFCCpCC,MAAM,kB,SACJA,MAAM,O,EACT,yBAA+C,MAA3CA,MAAM,gBAAe,qBAAiB,G,EAC1C,yBAA2D,MAAvDA,MAAM,oCAAmC,aAAS,G,EACtD,yBAAiD,MAA7CA,MAAM,oBAAmB,mBAAe,G,+BAIzC,Q,aAIEA,MAAM,O,EACT,yBAA+C,MAA3CA,MAAM,gBAAe,qBAAiB,G,GACrCA,MAAM,Y,GAMFA,MAAM,8B,GAONA,MAAM,kB,GACJA,MAAM,gD,GACJA,MAAM,e,GACNA,MAAM,e,GACNA,MAAM,e,SAINA,MAAM,e,GAKVA,MAAM,0B,GACJA,MAAM,gD,GACJA,MAAM,oB,GA4BPA,MAAM,Y,GAKTA,MAAM,mE,EAEP,yBAIE,OAHAC,IAAA,IACAC,MAAM,KACNC,IAAI,e,YAMTH,MAAM,Y,GACJA,MAAM,mC,EACT,yBAA2C,MAAvCA,MAAM,wBAAuB,SAAK,G,GAClCA,MAAM,Q,GACLA,MAAM,oB,SAkBqBA,MAAM,e,EACtC,yBAAM,mB,GACFA,MAAM,Q,+BAMT,S,+BAME,Q,2GA1Hb,yBAgIM,MAhIN,EAgIM,CA/H+B,IAAZ,EAAAI,MAAMC,Q,yBAA7B,yBASM,MATN,EASM,CARJ,EACA,EACA,EACA,yBAIC,GAHCC,GAAG,YACHN,MAAM,+C,+BACL,iBAAI,C,yCAGT,yBAoHM,SAnHJ,yBAkHM,MAlHN,EAkHM,CAjHJ,EACA,yBAuEM,MAvEN,EAuEM,E,2BAtEJ,yBAqEM,2CAnEgB,EAAAI,OAAK,SAAjBG,EAAMC,G,gCAFhB,yBAqEM,OApEJR,MAAM,4CAELS,IAAKF,EAAKG,I,CAEX,yBAMM,MANN,EAMM,CALJ,yBAIE,OAHAV,MAAM,YACLC,IAAKM,EAAKI,QAAQC,SAClBT,IAAKI,EAAKI,QAAQE,O,wBAGvB,yBAYM,MAZN,EAYM,CAXJ,yBAUM,MAVN,EAUM,CATJ,yBAAuD,MAAvD,EAAuD,6BAA3BN,EAAKI,QAAQE,OAAK,GAC9C,yBAAuD,MAAvD,EAAuD,6BAA3BN,EAAKI,QAAQG,OAAK,GAC9C,yBAGM,MAHN,EAGM,6BAFDP,EAAKI,QAAQI,MAAO,UACvB,6BAAG,EAAAC,SAASC,SAASV,EAAKI,QAAQO,QAAK,GAEW,QAArBX,EAAKI,QAAQQ,U,yBAA5C,yBAEM,MAFN,EAAgE,SACzD,6BAAG,EAAAH,SAASI,UAAUb,EAAKc,YAAS,I,2CAI/C,yBAkCM,MAlCN,EAkCM,CAjCJ,yBAgCM,MAhCN,EAgCM,CA/BJ,yBA2BM,MA3BN,EA2BM,CA1BJ,yBAQS,UAPPrB,MAAM,0BACNsB,KAAK,SACJ,QAAK,mBAAyB,UAAQ,EAAK,GAAI,EAAK,WAAY,EAAK,IAAK,EAAC,WAG7E,MAED,e,4BACA,yBAOE,SANAA,KAAK,iBACLtB,MAAM,2BACNuB,YAAY,GACZC,aAAW,iCACXC,mBAAiB,gB,yCACRlB,EAAKmB,IAAG,I,kDAARnB,EAAKmB,OAEhB,yBAQS,UAPP1B,MAAM,0BACNsB,KAAK,SACJ,QAAK,mBAAyB,UAAQ,EAAK,GAAI,EAAK,WAAY,EAAK,IAAK,EAAC,SAG7E,MAED,iBAEF,yBAEK,KAFL,EAAqB,OAChB,6BAAG,EAAAN,SAASC,SAASV,EAAKI,QAAQO,MAAQX,EAAKmB,MAAO,MAC3D,OAGJ,yBAQM,MARN,EAQM,CAPJ,yBAMI,KANDC,KAAK,IAAK,QAAK,+CAAU,EAAAC,WAAWrB,EAAKG,MAAE,c,CAC5C,G,8BASR,yBAuCM,MAvCN,EAuCM,CAtCJ,yBAqCM,MArCN,EAqCM,CApCJ,EACA,yBAA6D,KAA7D,EAAiB,UAAO,6BAAG,EAAAM,SAASC,SAAS,EAAAY,QAAS,KAAE,GACxD,yBAiBM,MAjBN,EAiBM,C,4BAhBJ,yBAME,SALAP,KAAK,OACLtB,MAAM,e,qDACG,EAAA8B,OAAM,IACdC,SAAU,EAAAC,cAAgB,EAAAH,MAC3BN,YAAY,S,uCAFH,EAAAO,UAIX,yBAQS,UAPP9B,MAAM,0BACNsB,KAAK,SACLZ,GAAG,gBACF,QAAK,8BAAE,EAAAuB,aAAA,EAAAA,YAAA,qBACPF,SAAU,EAAAC,cAAgB,EAAAH,OAC5B,OAED,kBAEO,EAAAG,cAAgB,EAAAH,O,yBAAzB,yBAA8D,IAA9D,EAAoD,W,uCACpD,EACA,yBAEK,KAFL,EAAiB,WACR,6BAAG,EAAAb,SAASC,SAAS,EAAAe,cAAe,MAC7C,GACA,yBAKC,GAJC1B,GAAG,SACHN,MAAM,6C,+BACP,iBACK,C,YAEN,yBAIC,GAHCM,GAAG,YACHN,MAAM,yC,+BACL,iBAAI,C,+CAYJ,GACbkC,KADa,WAEX,MAAO,CACL9B,MAAO,GACPyB,MAAO,EACPG,YAAa,EACbF,OAAQ,KAGZK,QAAS,CACPC,QADO,WACG,WACFC,EAASC,KAAKC,SAASC,OAC7BF,KAAKG,MACFC,IADH,UAEO,uCAFP,gBAE0C,aAF1C,UAIGC,MAAK,SAACC,GACLC,QAAQC,IAAIF,EAAIV,MAChB,EAAK9B,MAAQwC,EAAIV,KAAKA,KAAK9B,MAC3B,EAAKyB,MAAQe,EAAIV,KAAKA,KAAKL,MAC3B,EAAKG,YAAcY,EAAIV,KAAKA,KAAKF,eAElCe,OAAM,SAACC,GACNH,QAAQC,IAAIE,EAAIC,YAEjBC,SAAQ,WACPb,EAAOc,WAGbC,QApBO,SAoBCC,EAAQC,EAAW5B,EAAK6B,EAAOC,GACrC,IAAMC,EAAoB,QAARD,EAAgB9B,EAAM,EAAIA,EAAM,EAClDY,KAAKlC,MAAMmD,GAAO7B,IAAM+B,EACxBnB,KAAKoB,WAAWL,EAAQC,EAAWG,IAErCC,WAzBO,SAyBIhD,EAAI4C,EAAW5B,GACxB,IAAMiC,EAAW,CACfC,WAAYN,EACZ5B,OAEFY,KAAKG,MACFoB,IADH,UAEO,uCAFP,gBAE0C,aAF1C,iBAE2EnD,GACvE,CACEwB,KAAMyB,IAGThB,MAAK,eACLI,OAAM,SAACC,GACNH,QAAQC,IAAIE,EAAIC,aAGtBrB,WA1CO,SA0CIlB,GAAI,WACb4B,KAAKwB,MAAMC,KAAK,CACdlD,MAAO,SACPmD,gBAAgB,EAChBC,kBAAmB,KACnBC,eAAgB,OACfvB,MAAK,SAACwB,GACP,GAAIA,EAAOC,YAAa,CACtB,IAAM/B,EAAS,EAAKE,SAASC,OAC7B,EAAKC,MACF4B,OADH,UAEO,uCAFP,gBAE0C,aAF1C,iBAE2E3D,IAExEiC,MAAK,SAACC,GACL,MAA6BA,EAAIV,KAAzBoC,EAAR,EAAQA,QAASrB,EAAjB,EAAiBA,QACbqB,IACF,EAAKR,MAAMb,GACX,EAAKb,cAGRW,OAAM,SAACC,GACNH,QAAQC,IAAIE,EAAIC,YAEjBC,SAAQ,WACPb,EAAOc,eAKjBlB,YAvEO,WAuEO,WACNI,EAASC,KAAKC,SAASC,OACvB+B,EAAa,CAAEC,KAAMlC,KAAKR,QAChCQ,KAAKG,MAAMgC,KAAX,UAAmB,uCAAnB,gBAAsD,aAAtD,WAAyF,CAAEvC,KAAMqC,IAC9F5B,MAAK,SAACC,GACDA,EAAIV,KAAKoC,SACX,EAAKR,MAAMlB,EAAIV,KAAKe,SACpB,EAAKjB,YAAcY,EAAIV,KAAKA,KAAKF,aAEjC,EAAK8B,MAAMlB,EAAIV,KAAKe,YAGvBF,OAAM,SAACC,GACNH,QAAQC,IAAIE,EAAIC,YAEjBC,SAAQ,WACPb,EAAOc,YAIfuB,QApGa,WAqGXpC,KAAKF,YCzOT,EAAOuC,OAASA,EAED","file":"js/chunk-31f9366b.a7d3977c.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/bag-x.f923930d.svg\";","<template>\n  <div class=\"container py-5\">\n    <div class=\"row\" v-if=\"carts.length === 0\">\n      <h5 class=\"fw-bold mb-5\">購物車 Shopping Cart</h5>\n      <h1 class=\"fw-bold text-primary text-center\">購物車沒有東西唷！</h1>\n      <h5 class=\"text-center my-5\">快到商品頁面看看喜歡的商品吧。</h5>\n      <router-link\n        to=\"/products\"\n        class=\"btn btn-primary btn-lg d-block w-25 mx-auto\"\n        >繼續購物</router-link\n      >\n    </div>\n    <div v-else>\n      <div class=\"row\">\n        <h5 class=\"fw-bold mb-5\">購物車 Shopping Cart</h5>\n        <div class=\"col-lg-8\">\n          <div\n            class=\"row border-top border-bottom py-md-5 py-4\"\n            v-for=\"(cart, i) in carts\"\n            :key=\"cart.id\"\n          >\n            <div class=\"col-md-4 d-md-block d-none\">\n              <img\n                class=\"img-fluid\"\n                :src=\"cart.product.imageUrl\"\n                :alt=\"cart.product.title\"\n              />\n            </div>\n            <div class=\"col-md-4 col-5\">\n              <div class=\"row h-100 flex-column justify-content-evenly\">\n                <div class=\"text-center\">{{ cart.product.title }}</div>\n                <div class=\"text-center\">{{ cart.product.roast }}</div>\n                <div class=\"text-center\">\n                  {{ cart.product.unit }} / TWD\n                  {{ $filters.currency(cart.product.price) }}\n                </div>\n                <div class=\"text-center\" v-if=\"cart.product.category === '咖啡豆'\">\n                  研磨方式：{{ $filters.grindText(cart.grindType)}}\n                </div>\n              </div>\n            </div>\n            <div class=\"col-md-3 col-5 px-md-4\">\n              <div class=\"row h-100 flex-column justify-content-center\">\n                <div class=\"input-group mb-3\">\n                  <button\n                    class=\"btn btn-outline-primary\"\n                    type=\"button\"\n                    @click=\"\n                      calcQty(cart.id, cart.product_id, cart.qty, i, 'minus')\n                    \"\n                  >\n                    -\n                  </button>\n                  <input\n                    type=\"v-model.number\"\n                    class=\"form-control text-center\"\n                    placeholder=\"\"\n                    aria-label=\"Example text with button addon\"\n                    aria-describedby=\"button-addon1\"\n                    v-model=\"cart.qty\"\n                  />\n                  <button\n                    class=\"btn btn-outline-primary\"\n                    type=\"button\"\n                    @click=\"\n                      calcQty(cart.id, cart.product_id, cart.qty, i, 'add')\n                    \"\n                  >\n                    +\n                  </button>\n                </div>\n                <h6 class=\"text-end\">\n                  小計 {{ $filters.currency(cart.product.price * cart.qty) }} 元\n                </h6>\n              </div>\n            </div>\n            <div class=\"col-md-1 col-2 d-flex justify-content-center align-items-center\">\n              <a href=\"#\" @click.prevent=\"deleteCart(cart.id)\">\n                <img\n                  src=\"../assets/icons/bag-x.svg\"\n                  width=\"24\"\n                  alt=\"delete cart\"\n                />\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-lg-4\">\n          <div class=\"sticky-top ps-md-4 mt-3 mt-lg-0\">\n            <h5 class=\"fw-bold mt-3 mt-md-0\">購物車總計</h5>\n            <h6 class=\"mb-3\">小計：TWD {{ $filters.currency(total) }} 元</h6>\n            <div class=\"input-group mb-3\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                v-model=\"coupon\"\n                :disabled=\"final_total !== total\"\n                placeholder=\"輸入優惠券\"\n              />\n              <button\n                class=\"btn btn-outline-primary\"\n                type=\"button\"\n                id=\"button-addon2\"\n                @click=\"checkCoupon\"\n                :disabled=\"final_total !== total\"\n              >\n                套用\n              </button>\n            </div>\n            <p v-if=\"final_total !== total\" class=\"text-danger\">已使用優惠券</p>\n            <hr />\n            <h5 class=\"mb-3\">\n              總計：TWD {{ $filters.currency(final_total) }} 元\n            </h5>\n            <router-link\n              to=\"/order\"\n              class=\"btn btn-primary d-block w-100 btn-lg mb-2\"\n            >\n              確認訂單</router-link\n            >\n            <router-link\n              to=\"/products\"\n              class=\"btn btn-outline-primary d-block w-100\"\n              >繼續購物</router-link\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped></style>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: [],\n      total: 0,\n      final_total: 0,\n      coupon: '',\n    };\n  },\n  methods: {\n    getCart() {\n      const loader = this.$loading.show();\n      this.$http\n        .get(\n          `${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/cart`,\n        )\n        .then((res) => {\n          console.log(res.data);\n          this.carts = res.data.data.carts;\n          this.total = res.data.data.total;\n          this.final_total = res.data.data.final_total;\n        })\n        .catch((err) => {\n          console.log(err.message);\n        })\n        .finally(() => {\n          loader.hide();\n        });\n    },\n    calcQty(cartId, productId, qty, index, act) {\n      const updateQty = act === 'add' ? qty + 1 : qty - 1;\n      this.carts[index].qty = updateQty;\n      this.updateCart(cartId, productId, updateQty);\n    },\n    updateCart(id, productId, qty) {\n      const cartData = {\n        product_id: productId,\n        qty,\n      };\n      this.$http\n        .put(\n          `${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/cart/${id}`,\n          {\n            data: cartData,\n          },\n        )\n        .then(() => {})\n        .catch((err) => {\n          console.log(err.message);\n        });\n    },\n    deleteCart(id) {\n      this.$swal.fire({\n        title: '確定要刪除?',\n        showDenyButton: true,\n        confirmButtonText: '刪除',\n        denyButtonText: '取消',\n      }).then((result) => {\n        if (result.isConfirmed) {\n          const loader = this.$loading.show();\n          this.$http\n            .delete(\n              `${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/cart/${id}`,\n            )\n            .then((res) => {\n              const { success, message } = res.data;\n              if (success) {\n                this.$swal(message);\n                this.getCart();\n              }\n            })\n            .catch((err) => {\n              console.log(err.message);\n            })\n            .finally(() => {\n              loader.hide();\n            });\n        }\n      });\n    },\n    checkCoupon() {\n      const loader = this.$loading.show();\n      const couponData = { code: this.coupon };\n      this.$http.post(`${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/coupon`, { data: couponData })\n        .then((res) => {\n          if (res.data.success) {\n            this.$swal(res.data.message);\n            this.final_total = res.data.data.final_total;\n          } else {\n            this.$swal(res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err.message);\n        })\n        .finally(() => {\n          loader.hide();\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./Cart.vue?vue&type=template&id=72be7af4\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}