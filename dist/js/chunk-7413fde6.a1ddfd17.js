(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7413fde6"],{1593:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"container"},r={class:"table mt-4"},d=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"購買時間"),Object(a["createVNode"])("th",null,"Email"),Object(a["createVNode"])("th",null,"購買款項"),Object(a["createVNode"])("th",null,"應付金額"),Object(a["createVNode"])("th",null,"是否付款"),Object(a["createVNode"])("th",null,"編輯")])],-1),l={class:"list-unstyled"},n={class:"text-right"},i={class:"form-check form-switch"},s={key:0},b={key:1},O={class:"btn-group"};function u(e,t,c,u,p,j){var h=Object(a["resolveComponent"])("pages"),m=Object(a["resolveComponent"])("ordermodal"),V=Object(a["resolveComponent"])("delmodal");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("table",r,[d,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(p.orders,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:c},[p.orders.length?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:0,class:{"text-secondary":!t.is_paid}},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createVNode"])("td",null,[t.user?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,textContent:Object(a["toDisplayString"])(t.user.email)},null,8,["textContent"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("ul",l,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},Object(a["toDisplayString"])(e.product.title)+" 數量："+Object(a["toDisplayString"])(e.qty)+" "+Object(a["toDisplayString"])(e.product.unit),1)})),128))])]),Object(a["createVNode"])("td",n,Object(a["toDisplayString"])(t.total),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",i,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return j.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["vModelCheckbox"],t.is_paid]]),Object(a["createVNode"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",s,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",b,"未付款"))],8,["for"])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return j.editOrder(t)}},"檢視",8,["onClick"]),Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return j.showDeleteOrder(t)}},"刪除",8,["onClick"])])])],2)):Object(a["createCommentVNode"])("",!0)],64)})),128))])]),Object(a["createVNode"])(h,{pagination:p.pagination,onGetPagedData:j.getOrders},null,8,["pagination","onGetPagedData"]),Object(a["createVNode"])(m,{ref:"ordermodal",order:p.tempOrder,onUpdatePaid:j.updatePaid},null,8,["order","onUpdatePaid"]),Object(a["createVNode"])(V,{ref:"delmodal",order:p.tempOrder,onDeleteOrder:j.deleteOrder},null,8,["order","onDeleteOrder"])])}var p=c("5530"),j=(c("d3b7"),c("99af"),c("c994")),h=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),m={class:"modal-dialog modal-xl",role:"document"},V={class:"modal-content border-0"},f=Object(a["createVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["createVNode"])("span",null,"訂單細節")]),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),N={class:"modal-body"},g={class:"row"},k={class:"col-md-4"},y=Object(a["createVNode"])("h3",null,"用戶資料",-1),v={class:"table"},B={key:0},w=Object(a["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),D=Object(a["createVNode"])("th",null,"Email",-1),x=Object(a["createVNode"])("th",null,"電話",-1),C=Object(a["createVNode"])("th",null,"地址",-1),S={class:"col-md-8"},_=Object(a["createVNode"])("h3",null,"訂單細節",-1),$={class:"table"},M=Object(a["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),P=Object(a["createVNode"])("th",null,"下單時間",-1),L=Object(a["createVNode"])("th",null,"付款時間",-1),F={key:0},U={key:1},I=Object(a["createVNode"])("th",null,"付款狀態",-1),q={key:0,class:"text-success"},E={key:1,class:"text-muted"},G=Object(a["createVNode"])("th",null,"總金額",-1),J=Object(a["createVNode"])("h3",null,"選購商品",-1),z={class:"table"},A=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr")],-1),H={class:"text-end"},K={class:"d-flex justify-content-end"},Q={class:"form-check"},R={class:"form-check-label",for:"flexCheckDefault"},T={key:0},W={key:1},X={class:"modal-footer"},Y=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Z(e,t,c,o,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",h,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("div",V,[f,Object(a["createVNode"])("div",N,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",k,[y,Object(a["createVNode"])("table",v,[r.tempOrder.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",B,[Object(a["createVNode"])("tr",null,[w,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.name),1)]),Object(a["createVNode"])("tr",null,[D,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.email),1)]),Object(a["createVNode"])("tr",null,[x,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.tel),1)]),Object(a["createVNode"])("tr",null,[C,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",S,[_,Object(a["createVNode"])("table",$,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[M,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(r.tempOrder.id),1)]),Object(a["createVNode"])("tr",null,[P,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(r.tempOrder.create_at)),1)]),Object(a["createVNode"])("tr",null,[L,Object(a["createVNode"])("td",null,[r.tempOrder.paid_date?(Object(a["openBlock"])(),Object(a["createBlock"])("span",F,Object(a["toDisplayString"])(e.$filters.date(r.tempOrder.paid_date)),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("span",U,"時間不正確"))])]),Object(a["createVNode"])("tr",null,[I,Object(a["createVNode"])("td",null,[r.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",q,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",E,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[G,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(r.tempOrder.total)),1)])])]),J,Object(a["createVNode"])("table",z,[A,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.tempOrder.products,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.qty)+" / "+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createVNode"])("td",H,Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("div",Q,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.tempOrder.is_paid=e})},null,512),[[a["vModelCheckbox"],r.tempOrder.is_paid]]),Object(a["createVNode"])("label",R,[r.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",T,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",W,"未付款"))])])])])])]),Object(a["createVNode"])("div",X,[Y,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("update-paid",r.tempOrder)})}," 修改付款狀態 ")])])])],512)}var ee=c("7c2b"),te=c.n(ee),ce={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{tempOrder:{},orderModal:""}},methods:{show:function(){this.orderModal.show()},hide:function(){this.orderModal.hide()}},watch:{order:function(){this.tempOrder=this.order}},mounted:function(){this.orderModal=new te.a(this.$refs.modal)}};ce.render=Z;var ae=ce,oe={ref:"delModal",class:"modal",tabindex:"-1"},re={class:"modal-dialog"},de={class:"modal-content"},le=Object(a["createVNode"])("div",{class:"modal-header  bg-primary"},[Object(a["createVNode"])("h5",{class:"modal-title text-white fw-bold"},"刪除訂單"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ne=Object(a["createVNode"])("div",{class:"modal-body"},[Object(a["createVNode"])("p",null,"確定要刪除此訂單?")],-1),ie={class:"modal-footer"},se=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function be(e,t,c,o,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",oe,[Object(a["createVNode"])("div",re,[Object(a["createVNode"])("div",de,[le,ne,Object(a["createVNode"])("div",ie,[se,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.$emit("delete-order",c.order.id)})},"刪除")])])])],512)}var Oe={props:["order"],data:function(){return{modal:""}},methods:{showModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new te.a(this.$refs.delModal)}};Oe.render=be;var ue=Oe,pe={data:function(){return{orders:[],pagination:{},tempOrder:{}}},components:{pages:j["a"],ordermodal:ae,delmodal:ue},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=this.$loading.show();this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/admin/orders?page=").concat(t)).then((function(t){var c=t.data,a=c.success,o=c.orders,r=c.pagination;a&&(e.orders=o,e.pagination=r)})).catch((function(e){console.log(e.message)})).finally((function(){c.hide()}))},updatePaid:function(e){var t=this,c=this.$loading.show(),a={is_paid:e.is_paid};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/admin/order/").concat(e.id),{data:a}).then((function(e){var c=e.data.message;t.isLoading=!1,t.$swal.fire(c),t.getOrders(),t.$refs.ordermodal.hide()})).catch((function(e){console.log(e.message)})).finally((function(){c.hide()}))},editOrder:function(e){this.tempOrder=Object(p["a"])({},e),this.$refs.ordermodal.show()},showDeleteOrder:function(e){this.tempOrder=Object(p["a"])({},e),this.$refs.delmodal.showModal()},deleteOrder:function(e){var t=this,c=this.$loading.show();this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/admin/order/").concat(e)).then((function(){t.$swal.fire("已刪除訂單"),t.getOrders(),t.$refs.delmodal.hideModal()})).catch((function(e){console.log(e.message)})).finally((function(){c.hide()}))}},created:function(){this.getOrders()}};pe.render=u;t["default"]=pe},"2c21":function(e,t,c){},"688b":function(e,t,c){"use strict";c("2c21")},c994:function(e,t,c){"use strict";var a=c("7a23"),o=Object(a["withScopeId"])("data-v-6928f224");Object(a["pushScopeId"])("data-v-6928f224");var r={"aria-label":"..."},d={class:"pagination mt-5 mb-3"};Object(a["popScopeId"])();var l=o((function(e,t,c,o,l,n){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",r,[Object(a["createVNode"])("ul",d,[Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.pagination.has_pre}]},[Object(a["createVNode"])("a",{class:"page-link",href:"#",tabindex:"-1",onClick:t[1]||(t[1]=function(e){return n.getPagedData(c.pagination.current_page-1)})},"Previous")],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.pagination.total_pages,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["page-item",{active:e==c.pagination.current_page}],key:e},[Object(a["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(a["withModifiers"])((function(t){return n.getPagedData(e)}),["prevent"])},Object(a["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.pagination.has_next}]},[Object(a["createVNode"])("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(e){return n.getPagedData(c.pagination.current_page+1)}),["prevent"]))},"Next")],2)])])})),n={props:["pagination"],data:function(){return{}},methods:{getPagedData:function(e){this.$emit("get-paged-data",e)}}};c("688b");n.render=l,n.__scopeId="data-v-6928f224";t["a"]=n}}]);
//# sourceMappingURL=chunk-7413fde6.a1ddfd17.js.map