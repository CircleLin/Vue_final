(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f9366b"],{"871f":function(t,e,c){t.exports=c.p+"img/bag-x.f923930d.svg"},b789:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a=c("871f"),n=c.n(a),r={class:"container py-5"},l={key:0,class:"row"},i=Object(o["createVNode"])("h5",{class:"fw-bold mb-5"},"購物車 Shopping Cart",-1),d=Object(o["createVNode"])("h1",{class:"fw-bold text-primary text-center"},"購物車沒有東西唷！",-1),s=Object(o["createVNode"])("h5",{class:"text-center my-5"},"快到商品頁面看看喜歡的商品吧。",-1),u=Object(o["createTextVNode"])("繼續購物"),b={key:1},p={class:"row"},h=Object(o["createVNode"])("h5",{class:"fw-bold mb-5"},"購物車 Shopping Cart",-1),f={class:"col-lg-8"},j={class:"col-md-4 d-md-block d-none"},O={class:"col-md-4 col-5"},m={class:"row h-100 flex-column justify-content-evenly"},y={class:"text-center"},g={class:"text-center"},v={class:"text-center"},V={key:0,class:"text-center"},N={class:"col-md-3 col-5 px-md-4"},x={class:"row h-100 flex-column justify-content-center"},k={class:"input-group mb-3"},w={class:"text-end"},C={class:"col-md-1 col-2 d-flex justify-content-center align-items-center"},B=Object(o["createVNode"])("img",{src:n.a,width:"24",alt:"delete cart"},null,-1),$={class:"col-lg-4"},_={class:"sticky-top ps-md-4 mt-3 mt-lg-0"},D=Object(o["createVNode"])("h5",{class:"fw-bold mt-3 mt-md-0"},"購物車總計",-1),T={class:"mb-3"},S={class:"input-group mb-3"},q={key:0,class:"text-danger"},U=Object(o["createVNode"])("hr",null,null,-1),M={class:"mb-3"},Q=Object(o["createTextVNode"])(" 確認訂單"),W=Object(o["createTextVNode"])("繼續購物");function J(t,e,c,a,n,J){var E=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[0===n.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",l,[i,d,s,Object(o["createVNode"])(E,{to:"/products",class:"btn btn-primary btn-lg d-block w-25 mx-auto"},{default:Object(o["withCtx"])((function(){return[u]})),_:1})])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",b,[Object(o["createVNode"])("div",p,[h,Object(o["createVNode"])("div",f,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n.carts,(function(e,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"row border-top border-bottom py-md-5 py-4",key:e.id},[Object(o["createVNode"])("div",j,[Object(o["createVNode"])("img",{class:"img-fluid",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"])]),Object(o["createVNode"])("div",O,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",y,Object(o["toDisplayString"])(e.product.title),1),Object(o["createVNode"])("div",g,Object(o["toDisplayString"])(e.product.roast),1),Object(o["createVNode"])("div",v,Object(o["toDisplayString"])(e.product.unit)+" / TWD "+Object(o["toDisplayString"])(t.$filters.currency(e.product.price)),1),"咖啡豆"===e.product.category?(Object(o["openBlock"])(),Object(o["createBlock"])("div",V," 研磨方式："+Object(o["toDisplayString"])(t.$filters.grindText(e.grindType)),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])("div",N,[Object(o["createVNode"])("div",x,[Object(o["createVNode"])("div",k,[Object(o["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",onClick:function(t){return J.calcQty(e.id,e.product_id,e.qty,c,"minus")}}," - ",8,["onClick"]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"v-model.number",class:"form-control text-center",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.qty]]),Object(o["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",onClick:function(t){return J.calcQty(e.id,e.product_id,e.qty,c,"add")}}," + ",8,["onClick"])]),Object(o["createVNode"])("h6",w," 小計 "+Object(o["toDisplayString"])(t.$filters.currency(e.product.price*e.qty))+" 元 ",1)])]),Object(o["createVNode"])("div",C,[Object(o["createVNode"])("a",{href:"#",onClick:Object(o["withModifiers"])((function(t){return J.deleteCart(e.id)}),["prevent"])},[B],8,["onClick"])])])})),128))]),Object(o["createVNode"])("div",$,[Object(o["createVNode"])("div",_,[D,Object(o["createVNode"])("h6",T,"小計：TWD "+Object(o["toDisplayString"])(t.$filters.currency(n.total))+" 元",1),Object(o["createVNode"])("div",S,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.coupon=t}),disabled:n.final_total!==n.total,placeholder:"輸入優惠券"},null,8,["disabled"]),[[o["vModelText"],n.coupon]]),Object(o["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return J.checkCoupon&&J.checkCoupon.apply(J,arguments)}),disabled:n.final_total!==n.total}," 套用 ",8,["disabled"])]),n.final_total!==n.total?(Object(o["openBlock"])(),Object(o["createBlock"])("p",q,"已使用優惠券")):Object(o["createCommentVNode"])("",!0),U,Object(o["createVNode"])("h5",M," 總計：TWD "+Object(o["toDisplayString"])(t.$filters.currency(n.final_total))+" 元 ",1),Object(o["createVNode"])(E,{to:"/order",class:"btn btn-primary d-block w-100 btn-lg mb-2"},{default:Object(o["withCtx"])((function(){return[Q]})),_:1}),Object(o["createVNode"])(E,{to:"/products",class:"btn btn-outline-primary d-block w-100"},{default:Object(o["withCtx"])((function(){return[W]})),_:1})])])])]))])}c("d3b7"),c("99af");var E={data:function(){return{carts:[],total:0,final_total:0,coupon:""}},methods:{getCart:function(){var t=this,e=this.$loading.show();this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/cart")).then((function(e){console.log(e.data),t.carts=e.data.data.carts,t.total=e.data.data.total,t.final_total=e.data.data.final_total})).catch((function(t){console.log(t.message)})).finally((function(){e.hide()}))},calcQty:function(t,e,c,o,a){var n="add"===a?c+1:c-1;this.carts[o].qty=n,this.updateCart(t,e,n)},updateCart:function(t,e,c){var o={product_id:e,qty:c};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/cart/").concat(t),{data:o}).then((function(){})).catch((function(t){console.log(t.message)}))},deleteCart:function(t){var e=this;this.$swal.fire({title:"確定要刪除?",showDenyButton:!0,confirmButtonText:"刪除",denyButtonText:"取消"}).then((function(c){if(c.isConfirmed){var o=e.$loading.show();e.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/cart/").concat(t)).then((function(t){var c=t.data,o=c.success,a=c.message;o&&(e.$swal(a),e.getCart())})).catch((function(t){console.log(t.message)})).finally((function(){o.hide()}))}}))},checkCoupon:function(){var t=this,e=this.$loading.show(),c={code:this.coupon};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("myhex1-api","/coupon"),{data:c}).then((function(e){e.data.success?(t.$swal(e.data.message),t.final_total=e.data.data.final_total):t.$swal(e.data.message)})).catch((function(t){console.log(t.message)})).finally((function(){e.hide()}))}},mounted:function(){this.getCart()}};E.render=J;e["default"]=E}}]);
//# sourceMappingURL=chunk-31f9366b.a7d3977c.js.map