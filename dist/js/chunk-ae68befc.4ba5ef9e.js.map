{"version":3,"sources":["webpack:///./src/views/Order.vue?e67e","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/assets/icons/arrow-left-short.svg","webpack:///./src/views/Order.vue","webpack:///./src/views/Order.vue?3d30"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","module","exports","class","src","width","alt","for","type","to","style","carts","cart","key","id","product","imageUrl","title","roast","unit","$filters","currency","price","qty","onSubmit","ref","errors","name","placeholder","rules","user","email","isPhone","tel","addr","msgLengthLimit","cols","rows","msgTooLong","msg","as","checkAgree","agree","data","final_total","methods","getCart","loader","$loading","show","$http","then","res","catch","err","console","log","message","finally","hide","value","undefined","length","userData","address","post","success","orderId","$refs","form","resetForm","emitter","emit","$router","push","path","mounted","render","__scopeId"],"mappings":"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","file":"js/chunk-ae68befc.4ba5ef9e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Order.vue?vue&type=style&index=0&id=3130dfc2&scoped=true&lang=css\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","module.exports = __webpack_public_path__ + \"img/arrow-left-short.36456acd.svg\";","<template>\n  <div class=\"container py-5\">\n    <div class=\"row\">\n      <h5 class=\"fw-bold\">確認訂單 Check Out</h5>\n      <router-link to=\"/cart\" class=\"h6 mb-5 text-primary\" style=\"text-decoration:none;\">\n      <img src=\"../assets/icons/arrow-left-short.svg\" width=\"20\" alt=\"\"> 回到購物車</router-link>\n      <div class=\"col-md-5 bg-secondary px-4 py-3\">\n        <div class=\"row mb-1 justify-content-between\">\n          <div class=\"col-2\">\n            <h6 class=\"fw-bold\">商品</h6>\n          </div>\n          <div class=\"col-2 text-end\">\n            <h6 class=\"fw-bold\">小計</h6>\n          </div>\n        </div>\n        <div class=\"row border-top border-bottom\" v-for=\"cart in carts\" :key=\"cart.id\">\n          <div class=\"col-6\">\n            <div class=\"row py-3 h-100 d-flex flex-column justify-content-between\">\n              <div class=\"img-container mb-2\">\n                <img :src=\"cart.product.imageUrl\" :alt=\"cart.product.title\">\n              </div>\n              <div class=\"mb-2\">{{cart.product.title}}</div>\n              <div class=\"mb-2\">{{cart.product.roast}}</div>\n              <div>{{cart.product.unit }} / TWD {{ $filters.currency(cart.product.price)}}</div>\n            </div>\n          </div>\n          <div class=\"col-6 py-3\">\n            <div class=\"row h-100 d-flex flex-column justify-content-between\">\n              <div class=\"text-end\">數量：{{cart.qty}}</div>\n              <div class=\"text-end\">\n                TWD {{ $filters.currency(cart.qty * cart.product.price)}} 元\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-7 px-4 py-3\">\n        <!-- 結帳表單 -->\n        <h6 class=\"fw-bold\">填寫收件人資訊</h6>\n        <Form v-slot=\"{ errors }\" @submit=\"onSubmit\" ref=\"form\">\n          <label for=\"name\" class=\"form-label mt-3\"><span class=\"text-danger\">* </span>姓名</label>\n    <Field\n      id=\"name\"\n      name=\"姓名\"\n      type=\"text\"\n      class=\"form-control\"\n      :class=\"{ 'is-invalid': errors['姓名'] }\"\n      placeholder=\"請輸入姓名\"\n      rules=\"required\"\n      v-model=\"user.name\"\n    ></Field>\n    <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n    <label for=\"email\" class=\"form-label mt-3\"><span class=\"text-danger\">* </span>Email</label>\n    <Field\n      id=\"email\"\n      name=\"信箱\"\n      type=\"email\"\n      class=\"form-control\"\n      :class=\"{ 'is-invalid': errors['信箱'] }\"\n      placeholder=\"請輸入 Email\"\n      rules=\"email|required\"\n      v-model=\"user.email\"\n    ></Field>\n    <error-message name=\"信箱\" class=\"invalid-feedback\"></error-message>\n\n    <label for=\"tel\" class=\"form-label mt-3\"><span class=\"text-danger\">* </span>收件人電話</label>\n    <Field\n      id=\"tel\"\n      name=\"電話\"\n      type=\"tel\"\n      class=\"form-control\"\n      :class=\"{ 'is-invalid': errors['電話'] }\"\n      placeholder=\"請輸入電話\"\n      :rules=\"isPhone\"\n      v-model=\"user.tel\"\n    ></Field>\n    <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n\n    <label for=\"addr\" class=\"form-label mt-3\"><span class=\"text-danger\">* </span>收件人地址</label>\n    <Field\n      id=\"addr\"\n      name=\"地址\"\n      type=\"text\"\n      class=\"form-control\"\n      :class=\"{ 'is-invalid': errors['地址'] }\"\n      placeholder=\"請輸入地址\"\n      rules=\"required\"\n      v-model=\"user.addr\"\n    ></Field>\n    <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n\n    <label for=\"msg\" class=\"form-label mt-3\">訂單備註 (選填)</label>\n    <Field\n      id=\"msg\"\n      name=\"備註\"\n      :placeholder=\"'字數不可超過' + msgLengthLimit + '字元'\"\n      cols=\"10\"\n      rows=\"3\"\n      class=\"form-control\"\n      :class=\"{ 'is-invalid': errors['備註'] }\"\n      :rules=\"msgTooLong\"\n      v-model=\"msg\"\n      as=\"textarea\"\n    ></Field>\n    <error-message name=\"備註\" class=\"invalid-feedback\"></error-message>\n    <Field name=\"agree\" type=\"checkbox\" :rules=\"checkAgree\" v-model=\"user.agree\">\n      <label class=\"form-check-label mt-3\">\n        <input type=\"checkbox\" name=\"agree\" class=\"form-check-input\" v-model=\"user.agree\" />\n        <span class=\"text-danger\">  * </span>我已閱讀並同意網站的 條款與條件\n      </label>\n    </Field>\n    <error-message name=\"agree\" class=\"invalid-feedback\"></error-message>\n    <button class=\"btn btn-primary btn-lg mt-3 d-block w-100\"\n    type=\"submit\">送出訂單</button>\n  </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n  .img-container {\n    height:100px;\n    width:150px;\n  }\n  .img-container > img{\n    width:100%;\n    height:100%;\n    object-fit: contain;\n  }\n</style>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: [],\n      final_total: 0,\n      user: {\n        email: '',\n        name: '',\n        tel: '',\n        addr: '',\n        agree: false,\n      },\n      msg: '',\n      msgLengthLimit: 250,\n    };\n  },\n  methods: {\n    getCart() {\n      const loader = this.$loading.show();\n      this.$http\n        .get(`${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.carts = res.data.data.carts;\n          this.final_total = res.data.data.final_total;\n        })\n        .catch((err) => {\n          console.log(err.message);\n        })\n        .finally(() => {\n          loader.hide();\n        });\n    },\n    isPhone(value) {\n      if (value !== undefined) {\n        return value !== '' && value.length >= 8 && value.length <= 10\n          ? true\n          : '電話為必填，且長度需介於8~10碼';\n      }\n      return true;\n    },\n    msgTooLong(value) {\n      if (value !== undefined) {\n        return value.length < this.msgLengthLimit\n          ? true\n          : `留言字數不可超過${this.msgLengthLimit}個字元`;\n      }\n      return true;\n    },\n    checkAgree(value) {\n      return !value ? '請閱讀並同意網站購物條款' : true;\n    },\n    onSubmit() {\n      const loader = this.$loading.show();\n      const userData = {\n        data: {\n          user: {\n            name: this.user.name,\n            email: this.user.email,\n            tel: this.user.tel,\n            address: this.user.addr,\n          },\n          message: this.msg,\n        },\n      };\n\n      this.$http\n        .post(`${process.env.VUE_APP_BASEURL}/api/${process.env.VUE_APP_PATH}/order`, userData)\n        .then((res) => {\n          const { success, orderId } = res.data;\n          if (success) {\n            this.$refs.form.resetForm();\n            this.emitter.emit('updateCart');\n            this.$router.push({ path: `/pay/${orderId}` });\n          }\n        })\n        .catch((err) => {\n          console.log(err.message);\n        })\n        .finally(() => {\n          loader.hide();\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./Order.vue?vue&type=template&id=3130dfc2&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=3130dfc2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3130dfc2\"\n\nexport default script"],"sourceRoot":""}